import { Event } from './event-model';
const getAllEvents = async (reqQuery) => {
    const queryObject = { ...reqQuery };
    const query = Event.find(queryObject);
    const events = await query;
    return events;
};
const getUserEvents = async (userId) => {
    const query = Event.find({ user: userId });
    const events = await query;
    return events;
};
const addEvent = async (reqBody, loginUser) => {
    const createdEvent = new Event({
        ...reqBody, user: loginUser._id
    });
    await createdEvent.save();
    loginUser.events = loginUser.events.concat(createdEvent._id);
    await loginUser.save();
    return createdEvent;
};
const getEventById = async (reqParams) => {
    const event = await Event.findById({ _id: reqParams.id });
    return event;
};
const deleteEventById = async (reqParams) => {
    const event = await Event.findById({ _id: reqParams.id });
    return await event.remove();
};
const updateEventById = async (reqParams, reqBody) => {
    const eventToUpdate = {
        title: reqBody.title,
        description: reqBody.description,
        start: reqBody.start,
        end: reqBody.end
    };
    const event = await Event.findByIdAndUpdate(reqParams.id, eventToUpdate);
    event.save();
    return event;
};
export const eventRepository = {
    getAllEvents,
    getUserEvents,
    addEvent,
    getEventById,
    deleteEventById,
    updateEventById
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXZlbnQtcmVwb3NpdG9yeS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL2V2ZW50L2V2ZW50LXJlcG9zaXRvcnkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLEtBQUssRUFBRSxNQUFNLGVBQWUsQ0FBQTtBQUdyQyxNQUFNLFlBQVksR0FBRyxLQUFLLEVBQUUsUUFBUSxFQUFFLEVBQUU7SUFDcEMsTUFBTSxXQUFXLEdBQUcsRUFBRSxHQUFHLFFBQVEsRUFBRSxDQUFDO0lBQ3BDLE1BQU0sS0FBSyxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUE7SUFDckMsTUFBTSxNQUFNLEdBQUcsTUFBTSxLQUFLLENBQUE7SUFDMUIsT0FBTyxNQUFNLENBQUE7QUFDakIsQ0FBQyxDQUFBO0FBRUQsTUFBTSxhQUFhLEdBQUcsS0FBSyxFQUFFLE1BQU0sRUFBRSxFQUFFO0lBQ25DLE1BQU0sS0FBSyxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQTtJQUMxQyxNQUFNLE1BQU0sR0FBRyxNQUFNLEtBQUssQ0FBQTtJQUMxQixPQUFPLE1BQU0sQ0FBQTtBQUNqQixDQUFDLENBQUE7QUFHRCxNQUFNLFFBQVEsR0FBRyxLQUFLLEVBQUUsT0FBTyxFQUFFLFNBQVMsRUFBRSxFQUFFO0lBQzFDLE1BQU0sWUFBWSxHQUFHLElBQUksS0FBSyxDQUFDO1FBQzNCLEdBQUcsT0FBTyxFQUFFLElBQUksRUFBRSxTQUFTLENBQUMsR0FBRztLQUNsQyxDQUFDLENBQUE7SUFDRixNQUFNLFlBQVksQ0FBQyxJQUFJLEVBQUUsQ0FBQTtJQUV6QixTQUFTLENBQUMsTUFBTSxHQUFHLFNBQVMsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsQ0FBQTtJQUM1RCxNQUFNLFNBQVMsQ0FBQyxJQUFJLEVBQUUsQ0FBQTtJQUV0QixPQUFPLFlBQVksQ0FBQTtBQUN2QixDQUFDLENBQUE7QUFFRCxNQUFNLFlBQVksR0FBRyxLQUFLLEVBQUUsU0FBUyxFQUFFLEVBQUU7SUFDckMsTUFBTSxLQUFLLEdBQUcsTUFBTSxLQUFLLENBQUMsUUFBUSxDQUFDLEVBQUUsR0FBRyxFQUFFLFNBQVMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFBO0lBQ3pELE9BQU8sS0FBSyxDQUFBO0FBQ2hCLENBQUMsQ0FBQTtBQUVELE1BQU0sZUFBZSxHQUFHLEtBQUssRUFBRSxTQUFTLEVBQUUsRUFBRTtJQUN4QyxNQUFNLEtBQUssR0FBRyxNQUFNLEtBQUssQ0FBQyxRQUFRLENBQUMsRUFBRSxHQUFHLEVBQUUsU0FBUyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUE7SUFDekQsT0FBTyxNQUFNLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQztBQUNoQyxDQUFDLENBQUE7QUFFRCxNQUFNLGVBQWUsR0FBRyxLQUFLLEVBQUUsU0FBUyxFQUFFLE9BQU8sRUFBRSxFQUFFO0lBQ2pELE1BQU0sYUFBYSxHQUFHO1FBQ2xCLEtBQUssRUFBRSxPQUFPLENBQUMsS0FBSztRQUNwQixXQUFXLEVBQUUsT0FBTyxDQUFDLFdBQVc7UUFDaEMsS0FBSyxFQUFFLE9BQU8sQ0FBQyxLQUFLO1FBQ3BCLEdBQUcsRUFBRSxPQUFPLENBQUMsR0FBRztLQUNuQixDQUFBO0lBQ0QsTUFBTSxLQUFLLEdBQUcsTUFBTSxLQUFLLENBQUMsaUJBQWlCLENBQUMsU0FBUyxDQUFDLEVBQUUsRUFBRSxhQUFhLENBQUMsQ0FBQTtJQUN4RSxLQUFLLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDYixPQUFPLEtBQUssQ0FBQTtBQUNoQixDQUFDLENBQUE7QUFFRCxNQUFNLENBQUMsTUFBTSxlQUFlLEdBQUc7SUFDM0IsWUFBWTtJQUNaLGFBQWE7SUFDYixRQUFRO0lBQ1IsWUFBWTtJQUNaLGVBQWU7SUFDZixlQUFlO0NBQ2xCLENBQUMifQ==